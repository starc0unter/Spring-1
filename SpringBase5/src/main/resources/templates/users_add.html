<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>User form</title>
    <link rel="stylesheet" th:href="@{/resources/style.css}">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</head>

<body>

<div th:replace="~{fragments/navigation :: navi(AddUser)}"></div>

<div class="container">
    <form th:action="@{/user/form}" th:object="${user}" method="post">
        <div class="form-group">
            <input th:type="hidden" th:field="*{id}">
        </div>
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" th:field="*{username}" class="form-control" id="username" placeholder="username">
            <div class="error" th:if="${#fields.hasErrors('username')}" th:errors="*{username}">username error
                occurred
            </div>
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" th:field="*{password}" class="form-control" id="password"
                   placeholder="password">
            <div class="error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Passwords do not match
            </div>
        </div>
        <div class="form-group">
            <label for="matchingPassword">Repeat password</label>
            <input type="password" th:field="*{matchingPassword}" class="form-control" id="matchingPassword"
                   placeholder="repeat password">
        </div>
        <div class="form-group">
            <label for="roles">Role</label>
            <select multiple class="form-select-button" id="roles" th:field="*{roles}" required>
                <option th:each="role : ${roles}"
                        th:text="${role.name}"
                        th:value="${role.id}"
                        th:selected="${user.roles?.contains(role)}"></option>
            </select>
        </div>
        <button type="submit">Save</button>
    </form>
</div>

</body>
</html>